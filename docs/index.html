<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>武林外传人物图鉴 - 江湖儿女情，客栈风云录</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@splidejs/splide@4.1.4/dist/js/splide.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/5.4.3/echarts.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/p5.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/@splidejs/splide@4.1.4/dist/css/splide.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&family=Noto+Sans+SC:wght@300;400;500&family=ZCOOL+XiaoWei&display=swap" rel="stylesheet">
    <style>
        :root {
            --wood-brown: #8B4513;
            --warm-beige: #F5F5DC;
            --deep-red: #A0522D;
            --dark-green: #2F4F4F;
            --paper-bg: #FAF0E6;
            --text-dark: #3C2415;
        }
        
        body {
            font-family: 'Noto Sans SC', sans-serif;
            background: linear-gradient(135deg, var(--paper-bg) 0%, #F0E6D2 100%);
            color: var(--text-dark);
            min-height: 100vh;
        }
        
        .hero-title {
            font-family: 'ZCOOL XiaoWei', serif;
            background: linear-gradient(45deg, var(--wood-brown), var(--deep-red));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }
        
        .character-card {
            background: rgba(255, 255, 255, 0.9);
            border: 2px solid var(--wood-brown);
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }
        
        .character-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 24px rgba(139, 69, 19, 0.3);
            border-color: var(--deep-red);
        }
        
        .search-container {
            background: rgba(255, 255, 255, 0.95);
            border: 3px solid var(--wood-brown);
            border-radius: 15px;
            backdrop-filter: blur(15px);
        }
        
        .nav-bar {
            background: linear-gradient(90deg, var(--wood-brown) 0%, var(--deep-red) 100%);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }
        
        .filter-btn {
            background: var(--warm-beige);
            border: 2px solid var(--wood-brown);
            transition: all 0.3s ease;
        }
        
        .filter-btn:hover, .filter-btn.active {
            background: var(--wood-brown);
            color: white;
            transform: scale(1.05);
        }
        
        .feature-card {
            background: rgba(255, 255, 255, 0.9);
            border: 2px solid var(--deep-red);
            transition: all 0.3s ease;
        }
        
        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(160, 82, 45, 0.3);
        }
        
        .splide__arrow {
            background: var(--wood-brown) !important;
            opacity: 0.8;
        }
        
        .splide__arrow:hover {
            opacity: 1;
        }
        
        .particle-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            opacity: 0.3;
        }
        
        .quote-text {
            font-family: 'Noto Serif SC', serif;
            font-style: italic;
            color: var(--deep-red);
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }
        
        .faction-tag {
            background: var(--dark-green);
            color: white;
            font-size: 0.75rem;
            padding: 2px 8px;
            border-radius: 12px;
        }
        
        .martial-arts-tag {
            background: var(--deep-red);
            color: white;
            font-size: 0.75rem;
            padding: 2px 8px;
            border-radius: 12px;
        }
    </style>
</head>
<body>
    <!-- 粒子背景 -->
    <div id="particle-background" class="particle-bg"></div>
    
    <!-- 导航栏 -->
    <nav class="nav-bar fixed top-0 w-full z-50 px-6 py-4">
        <div class="max-w-7xl mx-auto flex items-center justify-between">
            <div class="flex items-center space-x-4">
                <h1 class="text-2xl font-bold text-white hero-title">武林外传图鉴</h1>
                <span class="text-white text-sm hidden md:block">江湖儿女情，客栈风云录</span>
            </div>
            <div class="flex items-center space-x-6">
                <a href="index.html" class="text-white hover:text-yellow-300 transition-colors font-medium">首页</a>
                <a href="character.html" class="text-white hover:text-yellow-300 transition-colors font-medium">角色详情</a>
                <a href="relations.html" class="text-white hover:text-yellow-300 transition-colors font-medium">关系图谱</a>
                <a href="activities.html" class="text-white hover:text-yellow-300 transition-colors font-medium">角色日志</a>
            </div>
        </div>
    </nav>
    
    <!-- 主要内容 -->
    <main class="pt-20">
        <!-- 英雄区域 -->
        <section class="relative min-h-screen flex items-center justify-center overflow-hidden">
            <div class="absolute inset-0 bg-gradient-to-b from-transparent to-black opacity-40"></div>
            <img src="/wlwz/assets/inn-interior-BFG22RJL.png" alt="同福客栈" class="absolute inset-0 w-full h-full object-cover">
            
            <div class="relative z-10 text-center text-white px-6 max-w-4xl mx-auto">
                <h1 class="hero-title text-6xl md:text-8xl font-bold mb-6 opacity-0" id="main-title">
                    武林外传
                </h1>
                <p class="text-xl md:text-2xl mb-8 quote-text opacity-0" id="main-subtitle">
                    "额滴个神啊！这里都是江湖儿女，讲的是人情世故。"
                </p>
                <div class="flex flex-col sm:flex-row gap-4 justify-center opacity-0" id="hero-buttons">
                    <button onclick="scrollToSearch()" class="bg-gradient-to-r from-yellow-600 to-red-600 hover:from-yellow-700 hover:to-red-700 text-white px-8 py-3 rounded-full font-semibold transition-all transform hover:scale-105 shadow-lg">
                        开始探索
                    </button>
                    <button onclick="window.location.href='relations.html'" class="bg-transparent border-2 border-white text-white px-8 py-3 rounded-full font-semibold hover:bg-white hover:text-gray-800 transition-all">
                        查看关系图谱
                    </button>
                </div>
            </div>
        </section>
        
        <!-- 搜索区域 -->
        <section id="search-section" class="py-16 px-6">
            <div class="max-w-6xl mx-auto">
                <div class="search-container p-8 mb-12">
                    <h2 class="text-3xl font-bold text-center mb-8 hero-title">寻找江湖儿女</h2>
                    
                    <!-- 搜索框 -->
                    <div class="relative mb-8">
                        <input 
                            type="text" 
                            id="search-input"
                            placeholder="输入角色姓名、绰号或武功..." 
                            class="w-full px-6 py-4 text-lg border-2 border-gray-300 rounded-lg focus:border-amber-600 focus:outline-none transition-colors"
                            oninput="handleSearch(this.value)"
                        >
                        <div class="absolute right-4 top-4 text-gray-400">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                            </svg>
                        </div>
                    </div>
                    
                    <!-- 搜索建议 -->
                    <div id="search-suggestions" class="hidden bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto"></div>
                    
                    <!-- 筛选器 -->
                    <div class="flex flex-wrap gap-4 justify-center mb-8">
                        <button class="filter-btn px-4 py-2 rounded-full font-medium active" onclick="filterCharacters('all')">全部</button>
                        <button class="filter-btn px-4 py-2 rounded-full font-medium" onclick="filterCharacters('tongfu')">同福客栈</button>
                        <button class="filter-btn px-4 py-2 rounded-full font-medium" onclick="filterCharacters('official')">官府</button>
                        <button class="filter-btn px-4 py-2 rounded-full font-medium" onclick="filterCharacters('jianghu')">江湖</button>
                        <button class="filter-btn px-4 py-2 rounded-full font-medium" onclick="filterCharacters('family')">家族</button>
                    </div>
                </div>
                
                <!-- 角色展示网格 -->
                <div id="characters-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                    <!-- 角色卡片将通过JavaScript动态生成 -->
                </div>
            </div>
        </section>
        
        <!-- 热门角色轮播 -->
        <section class="py-16 px-6 bg-gradient-to-r from-amber-50 to-red-50">
            <div class="max-w-6xl mx-auto">
                <h2 class="text-3xl font-bold text-center mb-12 hero-title">江湖风云人物</h2>
                
                <div class="splide" id="featured-characters">
                    <div class="splide__track">
                        <ul class="splide__list">
                            <!-- 轮播内容将通过JavaScript动态生成 -->
                        </ul>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- 功能介绍 -->
        <section class="py-16 px-6">
            <div class="max-w-6xl mx-auto">
                <h2 class="text-3xl font-bold text-center mb-12 hero-title">探索江湖世界</h2>
                
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                    <div class="feature-card p-6 rounded-lg text-center">
                        <div class="w-16 h-16 bg-gradient-to-r from-amber-600 to-red-600 rounded-full mx-auto mb-4 flex items-center justify-center">
                            <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                            </svg>
                        </div>
                        <h3 class="text-xl font-bold mb-2">智能搜索</h3>
                        <p class="text-gray-600">支持姓名、绰号、武功等多种搜索方式</p>
                    </div>
                    
                    <div class="feature-card p-6 rounded-lg text-center">
                        <div class="w-16 h-16 bg-gradient-to-r from-green-600 to-blue-600 rounded-full mx-auto mb-4 flex items-center justify-center">
                            <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                            </svg>
                        </div>
                        <h3 class="text-xl font-bold mb-2">性格分析</h3>
                        <p class="text-gray-600">深入了解每个角色的性格特点和成长历程</p>
                    </div>
                    
                    <div class="feature-card p-6 rounded-lg text-center">
                        <div class="w-16 h-16 bg-gradient-to-r from-purple-600 to-pink-600 rounded-full mx-auto mb-4 flex items-center justify-center">
                            <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                            </svg>
                        </div>
                        <h3 class="text-xl font-bold mb-2">关系图谱</h3>
                        <p class="text-gray-600">可视化展示人物间的复杂关系网络</p>
                    </div>
                    
                    <div class="feature-card p-6 rounded-lg text-center">
                        <div class="w-16 h-16 bg-gradient-to-r from-indigo-600 to-purple-600 rounded-full mx-auto mb-4 flex items-center justify-center">
                            <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                        <h3 class="text-xl font-bold mb-2">行为预测</h3>
                        <p class="text-gray-600">基于性格预测角色在不同情境下的行为</p>
                    </div>
                </div>
            </div>
        </section>
    </main>
    
    <!-- 页脚 -->
    <footer class="bg-gradient-to-r from-gray-800 to-gray-900 text-white py-8 px-6">
        <div class="max-w-6xl mx-auto text-center">
            <p class="text-lg mb-2">武林外传人物图鉴</p>
            <p class="text-gray-400">© 2025 江湖儿女情，客栈风云录</p>
        </div>
    </footer>
    
    <script src="resources/characters-data.js"></script>
    <script src="services/characterService.js"></script>
    <script src="main.js"></script>

          <script>
            (function() {
              'use strict';
              
              if (window.TraeBadgePlugin) return;
              
              const css = `
.trae-badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
  font-weight: 500;
  transition: all 0.2s ease;
  cursor: pointer;
  box-sizing: border-box;
  border-radius: 6px;
  position: fixed;
  padding: 8px 8px 8px 10px;
  height: 28px;
  width: 130px;
  z-index: 9999;
}

.trae-badge:hover.trae-badge--light {
  background-color: #EDEFF2;
}

.trae-badge:hover.trae-badge--dark {
  background-color: #2A2D31;
}

.trae-badge-content {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 4px;
}

.trae-badge-logo {
  flex-shrink: 0;
}

.trae-badge-share {
  flex-shrink: 0;
  color: rgba(78, 82, 87, 1);
}

.trae-badge:hover.trae-badge--light .trae-badge-share {
  color: rgba(38, 41, 44, 1);
}

.trae-badge:hover.trae-badge--dark .trae-badge-share {
  color: #D1D3DB;
}

.trae-badge-cancel {
  position: absolute;
  top: -8px;
  right: -8px;
  width: 16px;
  height: 16px;
  cursor: pointer;
  opacity: 0;
  visibility: hidden;
  z-index: 10001;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #000000;
}

.trae-badge:hover .trae-badge-cancel {
  opacity: 1 !important;
  visibility: visible !important;
}

/* 在移动端设备上始终显示取消按钮 */
@media (hover: none) and (pointer: coarse) {
  .trae-badge-cancel {
    opacity: 1 !important;
    visibility: visible !important;
  }
}

.trae-badge--light {
  background-color: rgba(255, 255, 255, 1);
  color: #ffffff;
  box-shadow: 0px 0px 0.5px 0px rgba(0, 0, 0, 0.12), 0px 1px 3px 0px rgba(0, 0, 0, 0.08), 0px 4px 8px 0px rgba(0, 0, 0, 0.12);
}

.trae-badge--dark {
  background-color: #000000;
  color: #ffffff;
  box-shadow: 0px 0px 0.5px 0px rgba(0, 0, 0, 0.12), 0px 1px 3px 0px rgba(0, 0, 0, 0.08), 0px 4px 8px 0px rgba(0, 0, 0, 0.12);
}

.trae-badge--bottom-right { bottom: 20px; right: 20px; }
.trae-badge--bottom-left { bottom: 20px; left: 20px; }
.trae-badge--top-right { top: 20px; right: 20px; }
.trae-badge--top-left { top: 20px; left: 20px; }
`;
              const logos = {"light":"<svg width=\"92\" height=\"12\" viewBox=\"0 0 92 12\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n<g clip-path=\"url(#clip0_5805_55291)\">\n<g clip-path=\"url(#clip1_5805_55291)\">\n<path d=\"M15.1579 11.2121H2.6478V9.12821H0.562988V0.787872H15.1579V11.2121ZM2.6478 9.12821H13.073V2.87269H2.6478V9.12821ZM7.86092 5.96865L6.38672 7.44275L4.91261 5.96865L6.38672 4.49445L7.86092 5.96865ZM12.0306 5.96775L10.5564 7.44185L9.08233 5.96775L10.5564 4.49355L12.0306 5.96775Z\" fill=\"white\"/>\n</g>\n<g clip-path=\"url(#clip2_5805_55291)\">\n<path d=\"M28.0793 3.37087H25.142V10.6863H23.143V3.37087H20.2048V1.5047H28.0793V3.37087ZM55.4369 3.36808H50.3789V8.81641H55.4369V10.6835H48.3789V1.50092H55.4369V3.36808ZM34.1761 1.50092C36.4528 1.50092 37.1355 2.26109 37.1355 4.43355C37.1355 6.00363 36.6872 6.72417 35.4243 7.14483L37.1466 10.6817H34.9474L33.3569 7.38095H31.2204L31.2222 10.6817V10.6826H29.2583V1.50092H34.1761ZM47.4897 10.6826H45.3993L44.5662 8.50363H40.8449L40.0819 10.6826H37.9048L41.4232 1.5047H44.081L47.4897 10.6826ZM55.436 6.119L53.8697 7.59311L52.3955 6.119L53.8697 4.6448L55.436 6.119ZM41.4547 6.86439H44.0173L42.8578 3.54429H42.5985L41.4547 6.86439ZM31.2222 5.60883H33.8948V5.60793C34.5636 5.60793 35.07 5.38284 35.0701 4.79156V4.14581C35.0701 3.55449 34.5636 3.32934 33.8948 3.32934H31.2222V5.60883Z\" fill=\"white\"/>\n</g>\n</g>\n<path d=\"M65.0407 4.17188C65.0009 3.79972 64.8333 3.50994 64.5379 3.30256C64.2453 3.09517 63.8646 2.99148 63.3958 2.99148C63.0663 2.99148 62.7836 3.04119 62.5478 3.14062C62.312 3.24006 62.1316 3.375 62.0066 3.54545C61.8816 3.71591 61.8177 3.91051 61.8149 4.12926C61.8149 4.31108 61.856 4.46875 61.9384 4.60227C62.0237 4.7358 62.1387 4.84943 62.2836 4.94318C62.4285 5.03409 62.589 5.1108 62.7651 5.1733C62.9413 5.2358 63.1188 5.28835 63.2978 5.33097L64.116 5.53551C64.4455 5.61222 64.7623 5.71591 65.0663 5.84659C65.3731 5.97727 65.6472 6.14205 65.8887 6.34091C66.133 6.53977 66.3262 6.77983 66.4683 7.06108C66.6103 7.34233 66.6813 7.67187 66.6813 8.04972C66.6813 8.56108 66.5506 9.01136 66.2893 9.40057C66.0279 9.78693 65.6501 10.0895 65.1558 10.3082C64.6643 10.5241 64.0691 10.6321 63.3703 10.6321C62.6913 10.6321 62.1018 10.527 61.6018 10.3168C61.1046 10.1065 60.7154 9.79972 60.4342 9.39631C60.1558 8.9929 60.0052 8.50142 59.9825 7.92188H61.5379C61.5606 8.22585 61.6543 8.47869 61.8191 8.6804C61.9839 8.8821 62.1984 9.03267 62.4626 9.1321C62.7296 9.23153 63.0279 9.28125 63.3575 9.28125C63.7012 9.28125 64.0024 9.23011 64.2609 9.12784C64.5222 9.02273 64.7268 8.87784 64.8745 8.69318C65.0222 8.50568 65.0975 8.28693 65.1004 8.03693C65.0975 7.80966 65.0308 7.62216 64.9001 7.47443C64.7694 7.32386 64.5862 7.19886 64.3504 7.09943C64.1174 6.99716 63.8447 6.90625 63.5322 6.8267L62.5393 6.57102C61.8205 6.38636 61.2524 6.10653 60.8347 5.73153C60.42 5.35369 60.2126 4.85227 60.2126 4.22727C60.2126 3.71307 60.3518 3.26278 60.6302 2.87642C60.9114 2.49006 61.2935 2.19034 61.7765 1.97727C62.2595 1.76136 62.8063 1.65341 63.4171 1.65341C64.0364 1.65341 64.5791 1.76136 65.045 1.97727C65.5137 2.19034 65.8816 2.48722 66.1487 2.8679C66.4157 3.24574 66.5535 3.6804 66.562 4.17188H65.0407ZM75.8891 6.13636C75.8891 7.0767 75.7129 7.8821 75.3607 8.55256C75.0112 9.22017 74.534 9.73153 73.9288 10.0866C73.3266 10.4418 72.6433 10.6193 71.8791 10.6193C71.1149 10.6193 70.4303 10.4418 69.8252 10.0866C69.2229 9.72869 68.7456 9.21591 68.3933 8.5483C68.0439 7.87784 67.8692 7.07386 67.8692 6.13636C67.8692 5.19602 68.0439 4.39205 68.3933 3.72443C68.7456 3.05398 69.2229 2.54119 69.8252 2.18608C70.4303 1.83097 71.1149 1.65341 71.8791 1.65341C72.6433 1.65341 73.3266 1.83097 73.9288 2.18608C74.534 2.54119 75.0112 3.05398 75.3607 3.72443C75.7129 4.39205 75.8891 5.19602 75.8891 6.13636ZM74.2996 6.13636C74.2996 5.47443 74.1959 4.91619 73.9885 4.46165C73.784 4.00426 73.4999 3.65909 73.1362 3.42614C72.7726 3.19034 72.3536 3.07244 71.8791 3.07244C71.4047 3.07244 70.9857 3.19034 70.622 3.42614C70.2584 3.65909 69.9729 4.00426 69.7655 4.46165C69.5609 4.91619 69.4587 5.47443 69.4587 6.13636C69.4587 6.7983 69.5609 7.35795 69.7655 7.81534C69.9729 8.26989 70.2584 8.61506 70.622 8.85085C70.9857 9.08381 71.4047 9.20028 71.8791 9.20028C72.3536 9.20028 72.7726 9.08381 73.1362 8.85085C73.4999 8.61506 73.784 8.26989 73.9885 7.81534C74.1959 7.35795 74.2996 6.7983 74.2996 6.13636ZM77.3837 10.5V1.77273H78.9647V9.17472H82.8085V10.5H77.3837ZM91.6391 6.13636C91.6391 7.0767 91.4629 7.8821 91.1107 8.55256C90.7612 9.22017 90.284 9.73153 89.6788 10.0866C89.0766 10.4418 88.3933 10.6193 87.6291 10.6193C86.8649 10.6193 86.1803 10.4418 85.5752 10.0866C84.9729 9.72869 84.4956 9.21591 84.1433 8.5483C83.7939 7.87784 83.6192 7.07386 83.6192 6.13636C83.6192 5.19602 83.7939 4.39205 84.1433 3.72443C84.4956 3.05398 84.9729 2.54119 85.5752 2.18608C86.1803 1.83097 86.8649 1.65341 87.6291 1.65341C88.3933 1.65341 89.0766 1.83097 89.6788 2.18608C90.284 2.54119 90.7612 3.05398 91.1107 3.72443C91.4629 4.39205 91.6391 5.19602 91.6391 6.13636ZM90.0496 6.13636C90.0496 5.47443 89.9459 4.91619 89.7385 4.46165C89.534 4.00426 89.2499 3.65909 88.8862 3.42614C88.5226 3.19034 88.1036 3.07244 87.6291 3.07244C87.1547 3.07244 86.7357 3.19034 86.372 3.42614C86.0084 3.65909 85.7229 4.00426 85.5155 4.46165C85.3109 4.91619 85.2087 5.47443 85.2087 6.13636C85.2087 6.7983 85.3109 7.35795 85.5155 7.81534C85.7229 8.26989 86.0084 8.61506 86.372 8.85085C86.7357 9.08381 87.1547 9.20028 87.6291 9.20028C88.1036 9.20028 88.5226 9.08381 88.8862 8.85085C89.2499 8.61506 89.534 8.26989 89.7385 7.81534C89.9459 7.35795 90.0496 6.7983 90.0496 6.13636Z\" fill=\"#32F08C\"/>\n<defs>\n<clipPath id=\"clip0_5805_55291\">\n<rect width=\"54.874\" height=\"10.4242\" fill=\"white\" transform=\"translate(0.562988 0.787872)\"/>\n</clipPath>\n<clipPath id=\"clip1_5805_55291\">\n<rect width=\"14.5949\" height=\"10.4242\" fill=\"white\" transform=\"translate(0.562988 0.787872)\"/>\n</clipPath>\n<clipPath id=\"clip2_5805_55291\">\n<rect width=\"35.2321\" height=\"9.18536\" fill=\"white\" transform=\"translate(20.2048 1.50092)\"/>\n</clipPath>\n</defs>\n</svg>","dark":"<svg width=\"92\" height=\"12\" viewBox=\"0 0 92 12\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n<g clip-path=\"url(#clip0_5805_55291)\">\n<g clip-path=\"url(#clip1_5805_55291)\">\n<path d=\"M15.1579 11.2121H2.6478V9.12821H0.562988V0.787872H15.1579V11.2121ZM2.6478 9.12821H13.073V2.87269H2.6478V9.12821ZM7.86092 5.96865L6.38672 7.44275L4.91261 5.96865L6.38672 4.49445L7.86092 5.96865ZM12.0306 5.96775L10.5564 7.44185L9.08233 5.96775L10.5564 4.49355L12.0306 5.96775Z\" fill=\"black\"/>\n</g>\n<g clip-path=\"url(#clip2_5805_55291)\">\n<path d=\"M28.0793 3.37088H25.142V10.6863H23.143V3.37088H20.2048V1.50471H28.0793V3.37088ZM55.4369 3.36808H50.3789V8.81642H55.4369V10.6835H48.3789V1.50092H55.4369V3.36808ZM34.1761 1.50092C36.4528 1.50092 37.1355 2.2611 37.1355 4.43355C37.1355 6.00364 36.6872 6.72418 35.4243 7.14484L37.1466 10.6817H34.9474L33.3569 7.38096H31.2204L31.2222 10.6817V10.6826H29.2583V1.50092H34.1761ZM47.4897 10.6826H45.3993L44.5662 8.50363H40.8449L40.0819 10.6826H37.9048L41.4232 1.50471H44.081L47.4897 10.6826ZM55.436 6.11901L53.8697 7.59312L52.3955 6.11901L53.8697 4.64481L55.436 6.11901ZM41.4547 6.8644H44.0173L42.8578 3.5443H42.5985L41.4547 6.8644ZM31.2222 5.60884H33.8948V5.60794C34.5636 5.60793 35.07 5.38285 35.0701 4.79156V4.14581C35.0701 3.5545 34.5636 3.32935 33.8948 3.32935H31.2222V5.60884Z\" fill=\"black\"/>\n</g>\n</g>\n<path d=\"M65.0407 4.17188C65.0009 3.79972 64.8333 3.50994 64.5379 3.30256C64.2453 3.09517 63.8646 2.99148 63.3958 2.99148C63.0663 2.99148 62.7836 3.04119 62.5478 3.14062C62.312 3.24006 62.1316 3.375 62.0066 3.54545C61.8816 3.71591 61.8177 3.91051 61.8149 4.12926C61.8149 4.31108 61.856 4.46875 61.9384 4.60227C62.0237 4.7358 62.1387 4.84943 62.2836 4.94318C62.4285 5.03409 62.589 5.1108 62.7651 5.1733C62.9413 5.2358 63.1188 5.28835 63.2978 5.33097L64.116 5.53551C64.4455 5.61222 64.7623 5.71591 65.0663 5.84659C65.3731 5.97727 65.6472 6.14205 65.8887 6.34091C66.133 6.53977 66.3262 6.77983 66.4683 7.06108C66.6103 7.34233 66.6813 7.67187 66.6813 8.04972C66.6813 8.56108 66.5506 9.01136 66.2893 9.40057C66.0279 9.78693 65.6501 10.0895 65.1558 10.3082C64.6643 10.5241 64.0691 10.6321 63.3703 10.6321C62.6913 10.6321 62.1018 10.527 61.6018 10.3168C61.1046 10.1065 60.7154 9.79972 60.4342 9.39631C60.1558 8.9929 60.0052 8.50142 59.9825 7.92188H61.5379C61.5606 8.22585 61.6543 8.47869 61.8191 8.6804C61.9839 8.8821 62.1984 9.03267 62.4626 9.1321C62.7296 9.23153 63.0279 9.28125 63.3575 9.28125C63.7012 9.28125 64.0024 9.23011 64.2609 9.12784C64.5222 9.02273 64.7268 8.87784 64.8745 8.69318C65.0222 8.50568 65.0975 8.28693 65.1004 8.03693C65.0975 7.80966 65.0308 7.62216 64.9001 7.47443C64.7694 7.32386 64.5862 7.19886 64.3504 7.09943C64.1174 6.99716 63.8447 6.90625 63.5322 6.8267L62.5393 6.57102C61.8205 6.38636 61.2524 6.10653 60.8347 5.73153C60.42 5.35369 60.2126 4.85227 60.2126 4.22727C60.2126 3.71307 60.3518 3.26278 60.6302 2.87642C60.9114 2.49006 61.2935 2.19034 61.7765 1.97727C62.2595 1.76136 62.8063 1.65341 63.4171 1.65341C64.0364 1.65341 64.5791 1.76136 65.045 1.97727C65.5137 2.19034 65.8816 2.48722 66.1487 2.8679C66.4157 3.24574 66.5535 3.6804 66.562 4.17188H65.0407ZM75.8891 6.13636C75.8891 7.0767 75.7129 7.8821 75.3607 8.55256C75.0112 9.22017 74.534 9.73153 73.9288 10.0866C73.3266 10.4418 72.6433 10.6193 71.8791 10.6193C71.1149 10.6193 70.4303 10.4418 69.8252 10.0866C69.2229 9.72869 68.7456 9.21591 68.3933 8.5483C68.0439 7.87784 67.8692 7.07386 67.8692 6.13636C67.8692 5.19602 68.0439 4.39205 68.3933 3.72443C68.7456 3.05398 69.2229 2.54119 69.8252 2.18608C70.4303 1.83097 71.1149 1.65341 71.8791 1.65341C72.6433 1.65341 73.3266 1.83097 73.9288 2.18608C74.534 2.54119 75.0112 3.05398 75.3607 3.72443C75.7129 4.39205 75.8891 5.19602 75.8891 6.13636ZM74.2996 6.13636C74.2996 5.47443 74.1959 4.91619 73.9885 4.46165C73.784 4.00426 73.4999 3.65909 73.1362 3.42614C72.7726 3.19034 72.3536 3.07244 71.8791 3.07244C71.4047 3.07244 70.9857 3.19034 70.622 3.42614C70.2584 3.65909 69.9729 4.00426 69.7655 4.46165C69.5609 4.91619 69.4587 5.47443 69.4587 6.13636C69.4587 6.7983 69.5609 7.35795 69.7655 7.81534C69.9729 8.26989 70.2584 8.61506 70.622 8.85085C70.9857 9.08381 71.4047 9.20028 71.8791 9.20028C72.3536 9.20028 72.7726 9.08381 73.1362 8.85085C73.4999 8.61506 73.784 8.26989 73.9885 7.81534C74.1959 7.35795 74.2996 6.7983 74.2996 6.13636ZM77.3837 10.5V1.77273H78.9647V9.17472H82.8085V10.5H77.3837ZM91.6391 6.13636C91.6391 7.0767 91.4629 7.8821 91.1107 8.55256C90.7612 9.22017 90.284 9.73153 89.6788 10.0866C89.0766 10.4418 88.3933 10.6193 87.6291 10.6193C86.8649 10.6193 86.1803 10.4418 85.5752 10.0866C84.9729 9.72869 84.4956 9.21591 84.1433 8.5483C83.7939 7.87784 83.6192 7.07386 83.6192 6.13636C83.6192 5.19602 83.7939 4.39205 84.1433 3.72443C84.4956 3.05398 84.9729 2.54119 85.5752 2.18608C86.1803 1.83097 86.8649 1.65341 87.6291 1.65341C88.3933 1.65341 89.0766 1.83097 89.6788 2.18608C90.284 2.54119 90.7612 3.05398 91.1107 3.72443C91.4629 4.39205 91.6391 5.19602 91.6391 6.13636ZM90.0496 6.13636C90.0496 5.47443 89.9459 4.91619 89.7385 4.46165C89.534 4.00426 89.2499 3.65909 88.8862 3.42614C88.5226 3.19034 88.1036 3.07244 87.6291 3.07244C87.1547 3.07244 86.7357 3.19034 86.372 3.42614C86.0084 3.65909 85.7229 4.00426 85.5155 4.46165C85.3109 4.91619 85.2087 5.47443 85.2087 6.13636C85.2087 6.7983 85.3109 7.35795 85.5155 7.81534C85.7229 8.26989 86.0084 8.61506 86.372 8.85085C86.7357 9.08381 87.1547 9.20028 87.6291 9.20028C88.1036 9.20028 88.5226 9.08381 88.8862 8.85085C89.2499 8.61506 89.534 8.26989 89.7385 7.81534C89.9459 7.35795 90.0496 6.7983 90.0496 6.13636Z\" fill=\"#0AB861\"/>\n<defs>\n<clipPath id=\"clip0_5805_55291\">\n<rect width=\"54.874\" height=\"10.4242\" fill=\"white\" transform=\"translate(0.562988 0.787872)\"/>\n</clipPath>\n<clipPath id=\"clip1_5805_55291\">\n<rect width=\"14.5949\" height=\"10.4242\" fill=\"white\" transform=\"translate(0.562988 0.787872)\"/>\n</clipPath>\n<clipPath id=\"clip2_5805_55291\">\n<rect width=\"35.2321\" height=\"9.18536\" fill=\"white\" transform=\"translate(20.2048 1.50092)\"/>\n</clipPath>\n</defs>\n</svg>"};
              const cancelDark = `<svg width="16" height="15" viewBox="0 0 16 15" fill="none" xmlns="http://www.w3.org/2000/svg">
<g clip-path="url(#clip0_5993_243)">
<path d="M0.437012 7.5C0.437012 3.35786 3.79488 0 7.93701 0C12.0791 0 15.437 3.35786 15.437 7.5C15.437 11.6421 12.0791 15 7.93701 15C3.79488 15 0.437012 11.6421 0.437012 7.5Z" fill="#EDEFF2"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M7.93698 1.34036C11.3391 1.34036 14.0966 4.09792 14.0966 7.5C14.0966 10.9021 11.3391 13.6596 7.93698 13.6596C4.53491 13.6596 1.77734 10.9021 1.77734 7.5C1.77734 4.09792 4.53491 1.34036 7.93698 1.34036Z" fill="#111214"/>
<path d="M7.93717 6.70886L9.40826 5.23776L9.80383 4.84128L10.5959 5.63334L10.1994 6.02891L8.72831 7.5L10.1994 8.9711L10.5959 9.36667L9.80383 10.1587L9.40826 9.76224L7.93717 8.29115L6.46607 9.76224L6.0705 10.1587L5.27844 9.36667L5.67493 8.9711L7.14602 7.5L5.67493 6.02891L5.27844 5.63334L6.0705 4.84128L6.46607 5.23776L7.93717 6.70886Z" fill="white"/>
</g>
<defs>
<clipPath id="clip0_5993_243">
<path d="M0.437012 7.5C0.437012 3.35786 3.79488 0 7.93701 0C12.0791 0 15.437 3.35786 15.437 7.5C15.437 11.6421 12.0791 15 7.93701 15C3.79488 15 0.437012 11.6421 0.437012 7.5Z" fill="white"/>
</clipPath>
</defs>
</svg>`;
              const cancelLight = `<svg width="16" height="15" viewBox="0 0 16 15" fill="none" xmlns="http://www.w3.org/2000/svg">
<g clip-path="url(#clip0_5993_279)">
<path d="M0.437012 7.5C0.437012 3.35786 3.79488 0 7.93701 0C12.0791 0 15.437 3.35786 15.437 7.5C15.437 11.6421 12.0791 15 7.93701 15C3.79488 15 0.437012 11.6421 0.437012 7.5Z" fill="#2A2D31"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M7.93698 1.34036C11.3391 1.34036 14.0966 4.09792 14.0966 7.5C14.0966 10.9021 11.3391 13.6596 7.93698 13.6596C4.53491 13.6596 1.77734 10.9021 1.77734 7.5C1.77734 4.09792 4.53491 1.34036 7.93698 1.34036Z" fill="white"/>
<path d="M7.93717 6.70886L9.40826 5.23776L9.80383 4.84128L10.5959 5.63334L10.1994 6.02891L8.72831 7.5L10.1994 8.9711L10.5959 9.36667L9.80383 10.1587L9.40826 9.76224L7.93717 8.29115L6.46607 9.76224L6.0705 10.1587L5.27844 9.36667L5.67493 8.9711L7.14602 7.5L5.67493 6.02891L5.27844 5.63334L6.0705 4.84128L6.46607 5.23776L7.93717 6.70886Z" fill="black"/>
</g>
<defs>
<clipPath id="clip0_5993_279">
<path d="M0.437012 7.5C0.437012 3.35786 3.79488 0 7.93701 0C12.0791 0 15.437 3.35786 15.437 7.5C15.437 11.6421 12.0791 15 7.93701 15C3.79488 15 0.437012 11.6421 0.437012 7.5Z" fill="white"/>
</clipPath>
</defs>
</svg>`;
              const shareIcon = `<svg width="15" height="14" viewBox="0 0 15 14" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M5.68693 2.33333H2.77026V11.6667H12.1036V8.75M8.6036 2.33333H12.1036V5.83333M6.8536 7.58333L11.5203 2.91666" 
        stroke="currentColor" stroke-width="1.05" stroke-linecap="square"/>
</svg>`;
              
              
          // 主题选择函数 (复用自 theme.ts)
          function getLuminance(r, g, b) {
            return 0.299 * r + 0.587 * g + 0.114 * b;
          }
          
          function parseColor(color) {
            const rgbaMatch = color.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*[\d.]+)?\)/);
            if (rgbaMatch) {
              return [parseInt(rgbaMatch[1]), parseInt(rgbaMatch[2]), parseInt(rgbaMatch[3])];
            }
            
            const hexMatch = color.match(/^#([0-9a-f]{6})$/i);
            if (hexMatch) {
              const hex = hexMatch[1];
              return [
                parseInt(hex.substr(0, 2), 16),
                parseInt(hex.substr(2, 2), 16),
                parseInt(hex.substr(4, 2), 16)
              ];
            }
            
            const hexShortMatch = color.match(/^#([0-9a-f]{3})$/i);
            if (hexShortMatch) {
              const hex = hexShortMatch[1];
              return [
                parseInt(hex[0] + hex[0], 16),
                parseInt(hex[1] + hex[1], 16),
                parseInt(hex[2] + hex[2], 16)
              ];
            }
            
            return null;
          }
          
          function detectBackgroundColor(element) {
            let targetElement;
            
            if (typeof element === 'string') {
              const found = document.querySelector(element);
              console.debug('Target element found:', found);
              if (!found) return 'rgb(255, 255, 255)';
              targetElement = found;
            } else if (element) {
              targetElement = element;
            } else {
              targetElement = document.body;
            }
            
            let currentElement = targetElement;
            
            while (currentElement && currentElement !== document.documentElement) {
              const computedStyle = window.getComputedStyle(currentElement);
              const backgroundColor = computedStyle.backgroundColor;
              
              console.debug('Checking element:', currentElement.tagName, currentElement.id, currentElement.className);
              console.debug('Background color:', backgroundColor);
              
              if (backgroundColor && backgroundColor !== 'rgba(0, 0, 0, 0)' && backgroundColor !== 'transparent') {
                console.debug('Found background color:', backgroundColor, 'on element:', currentElement);
                return backgroundColor;
              }
              
              currentElement = currentElement.parentElement;
            }
            
            const bodyStyle = window.getComputedStyle(document.body);
            const bodyBackground = bodyStyle.backgroundColor;
            console.debug('Body background:', bodyBackground);
            if (bodyBackground && bodyBackground !== 'rgba(0, 0, 0, 0)' && bodyBackground !== 'transparent') {
              return bodyBackground;
            }
            
            const htmlStyle = window.getComputedStyle(document.documentElement);
            const htmlBackground = htmlStyle.backgroundColor;
            console.debug('HTML background:', htmlBackground);
            if (htmlBackground && htmlBackground !== 'rgba(0, 0, 0, 0)' && htmlBackground !== 'transparent') {
              return htmlBackground;
            }
            
            console.debug('No background found, returning default white');
            return 'rgb(255, 255, 255)';
          }
          
          function autoSelectTheme(container) {
            const backgroundColor = detectBackgroundColor(container);
            const rgb = parseColor(backgroundColor);
            
            console.debug('TRAE Badge Plugin - Background detection:', {
              container,
              backgroundColor,
              rgb
            });
            
            if (!rgb) {
              console.debug('TRAE Badge Plugin - No RGB found, using dark theme');
              return 'dark';
            }
            
            const [r, g, b] = rgb;
            const luminance = getLuminance(r, g, b);
            const selectedTheme = luminance > 128 ? 'dark' : 'light';
            
            console.debug('TRAE Badge Plugin - Theme selection:', {
              luminance,
              selectedTheme,
              reason: luminance > 128 ? 'Light background -> Dark badge' : 'Dark background -> Light badge'
            });
            
            return selectedTheme;
          }
        
              
              // 注入样式
              const style = document.createElement('style');
              style.id = 'trae-badge-plugin-styles';
              style.textContent = css;
              document.head.appendChild(style);
              
              // 创建 Badge 函数
              function createBadge() {
                // 移除已存在的 badge
                const existingBadge = document.getElementById('trae-badge-plugin');
                if (existingBadge) {
                  existingBadge.remove();
                }
                
                // 确定主题
                let variant = 'dark';
                if (true) {
                  variant = autoSelectTheme('#root');
                }
                
                const isDarkBackground = variant === 'dark';
                const logoType = isDarkBackground ? 'light' : 'dark';
                const cancelIcon = isDarkBackground ? cancelLight : cancelDark;
                
                const badge = document.createElement('div');
                badge.id = 'trae-badge-plugin';
                badge.className = `trae-badge trae-badge--${variant} trae-badge--bottom-right`;
                badge.innerHTML = `
                  <div class="trae-badge-content">
                    <div class="trae-badge-logo">${logos[logoType]}</div>
                    <div class="trae-badge-share">${shareIcon}</div>
                  </div>
                  <div class="trae-badge-cancel">${cancelIcon}</div>
                `;
                
                // 添加点击事件
                
                badge.style.cursor = 'pointer';
                badge.addEventListener('click', (e) => {
                  if (e.target.closest('.trae-badge-cancel')) return;
                  window.open('https://www.trae.ai/solo?showJoin=1', '_blank');
                });
                
                
                // 添加取消按钮事件
                const cancelButton = badge.querySelector('.trae-badge-cancel');
                if (cancelButton) {
                  cancelButton.addEventListener('click', (e) => {
                    e.stopPropagation();
                    badge.remove();
                  });
                }
                
                document.body.appendChild(badge);
                return badge;
              }
              
              // 初始创建 badge
              // 等待 React 组件渲染完成后再创建 badge
              function initBadge() {
                // 使用 requestAnimationFrame 等待渲染完成
                requestAnimationFrame(() => {
                  // 再次检查目标元素是否存在
                  const targetElement = document.querySelector('#root');
                  if (targetElement) {
                    const badge = createBadge();
                  } else {
                    // 如果还没有找到，等待一段时间再试
                    setTimeout(() => {
                      const badge = createBadge();
                    }, 500);
                  }
                });
              }
              
              if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', initBadge);
              } else {
                // DOM 已经加载完成，但 React 可能还没渲染
                initBadge();
              }
              
              window.TraeBadgePlugin = { 
                destroy: () => {
                  const badge = document.getElementById('trae-badge-plugin');
                  if (badge) badge.remove();
                  style.remove();
                  delete window.TraeBadgePlugin;
                },
                recreate: createBadge
              };
            })();
          </script>
        
</body>
</html>
